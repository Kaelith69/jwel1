<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Orders - Luxury Jewelleries</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="../neumorphic.css">
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>
    <header class="admin-header with-nav">
        <h1 class="site-title">Admin</h1>
        <nav class="admin-nav" aria-label="Primary">
            <ul>
                <li><a href="products.html">Products</a></li>
                <li><a href="orders.html" aria-current="page">Orders</a></li>
                <li><a href="add-product.html">Add Product</a></li>
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="settings.html">Settings</a></li>
                <li><a href="../index.html">Site Home</a></li>
                <li><a href="../contact.html">About &amp; Contact</a></li>
            </ul>
        </nav>
        <div class="admin-header-actions">
            <div id="conn-indicator" class="conn-indicator state-offline" title="Firebase connection">
                <span class="conn-dot" aria-hidden="true"></span>
                <span id="conn-label">Offline</span>
            </div>
            <button id="logout-btn" class="admin-button secondary">Logout</button>
        </div>
    </header>
    <main id="main" class="page-container" tabindex="-1">
        <section class="glass-panel" aria-labelledby="orders-title">
            <header class="panel-head">
                <h2 id="orders-title" class="title-compact">Orders</h2>
                <div class="toolbar">
                    <input type="text" id="order-search" placeholder="Search order ID / customer" aria-label="Search orders">
                    <label>Date From <input type="date" id="order-date-start"></label>
                    <label>Date To <input type="date" id="order-date-end"></label>
                    <select id="order-status-filter" aria-label="Filter by status">
                        <option value="">All Statuses</option>
                        <option value="Pending">Pending</option>
                        <option value="Processing">Processing</option>
                        <option value="Shipped">Shipped</option>
                        <option value="Delivered">Delivered</option>
                        <option value="Cancelled">Cancelled</option>
                    </select>
                    <select id="order-sort" aria-label="Sort orders">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                    </select>
                    <button id="order-filters-reset" class="admin-button secondary" type="button">Reset</button>
                    <button id="export-orders" class="admin-button secondary" type="button">Export CSV</button>
                    <button id="sync-orders-firestore" class="admin-button secondary" type="button" title="Fetch latest orders from Firestore and cache locally">Sync from Firestore</button>
                    <button id="clear-orders-btn" class="admin-button danger ml-auto" type="button">Clear All</button>
                </div>
            </header>
            <div class="kpi-cards" id="kpi-cards" aria-label="Revenue summary">
                <div class="kpi-card" id="kpi-today"><span class="kpi-label">Today</span><span class="kpi-value">₹0</span><span class="kpi-sub" id="kpi-today-count">0 orders</span></div>
                <div class="kpi-card" id="kpi-week"><span class="kpi-label">Last 7 Days</span><span class="kpi-value">₹0</span><span class="kpi-sub" id="kpi-week-count">0 orders</span></div>
                <div class="kpi-card" id="kpi-month"><span class="kpi-label">This Month</span><span class="kpi-value">₹0</span><span class="kpi-sub" id="kpi-month-count">0 orders</span></div>
                <div class="kpi-card" id="kpi-total"><span class="kpi-label">Total</span><span class="kpi-value">₹0</span><span class="kpi-sub" id="kpi-total-count">0 orders</span></div>
            </div>
            <div class="table-wrapper" role="region" aria-label="Orders table">
                <table class="data-table orders-table" id="orders-table">
                    <thead>
                        <tr>
                            <th scope="col">Order ID</th>
                            <th scope="col">Date / Time</th>
                            <th scope="col">Status</th>
                            <th scope="col">Customer / Items</th>
                            <th scope="col">Total (₹)</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="orders-table-body"></tbody>
                </table>
            </div>
            <template id="order-detail-template">
                <tr class="order-detail-row"><td colspan="6"><div class="order-detail">
                    <div class="od-section"><h4>Customer</h4><div class="od-customer"></div></div>
                    <div class="od-section"><h4>Items</h4><ul class="od-items"></ul></div>
                    <div class="od-section"><h4>Meta</h4><div class="od-meta"></div></div>
                </div></td></tr>
            </template>
            <p id="orders-empty" class="hidden opacity-70">No orders match your filters.</p>
        </section>
        <div id="live-status" class="visually-hidden" aria-live="polite" aria-atomic="true"></div>
    </main>
    <script src="../js/utils.js" defer></script>
    <script type="module" src="admin.js"></script>
</body>
</html>
